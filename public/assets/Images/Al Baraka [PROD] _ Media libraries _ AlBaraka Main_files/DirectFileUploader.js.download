DFU={init:function(n,t){if(n!=null){var i=n.ownerDocument.body,r=n.ownerDocument.documentElement,u=Math.max(i.scrollWidth,r.scrollWidth,i.scrollHeight,r.scrollHeight);n.style.position="absolute";n.style.cursor="pointer";n.style.outline="none";n.style.padding=n.style.margin=n.style.top=n.style.right="0";n.style.fontSize=(u>0?u:500)+"px";typeof n.style.opacity!="string"&&typeof n.filters!="undefined"?n.style.filter="alpha(opacity=0)":n.style.opacity="0";t&&DFU.toogleLoading(t,!1)}},initializeDesign:function(n){var t=$cmsj("#"+n),i=t.find("div.InnerDiv"),r=t.find("div.UploaderDiv"),u=!0,f,e,o;if(i.find("img").each(function(){DFU.isImageLoaded(this)||(u=!1)}),f=t.closest(".JqueryUITabs"),f.length>0){f.on("tabsactivate",function(){i.is(":visible")&&(r.width()==0||r.height()==0)&&DFU.setWidthAndHeight(n,i,r,t)});i.closest(".ui-tabs-panel").length<=0&&(u=!1)}e=t.closest("div.Collapsed");e.length>0&&(o=new MutationObserver(function(u){u.forEach(function(u){u.attributeName==="class"&&i.is(":visible")&&(r.width()==0||r.height()==0)&&DFU.setWidthAndHeight(n,i,r,t)})}),o.observe(e[0],{attributes:!0}));u?DFU.setWidthAndHeight(n,i,r,t):setTimeout(function(){DFU.initializeDesign(n)},100)},setWidthAndHeight:function(n,t,i,r){var u=t.outerWidth(),f=t.outerHeight();u>0&&f>0&&(i.width(u).height(f),r.find("iframe").width(u).height(f).trigger("resize"),r.width(u).height(f).mouseenter(function(){$cmsj(this).addClass("MouseOver")}).mouseleave(function(){$cmsj(this).removeClass("MouseOver")}),DFU.toogleLoading(n,!1),t.css("display","block"))},toogleLoading:function(n,t){var i=$cmsj("#"+n),u=i.find(".LoadingDiv"),f=i.find(".innerLoadingDiv"),e=i.find(".InnerDiv"),r=i.find(".UploaderDiv");t?(Math.abs(f.width()-i.width())<30&&f.hide(),u.show(),r.css({top:-r.outerHeight(),"z-index":-100}),e.hide()):(u.hide(),r.css({top:0,"z-index":""}),e.show())},isImageLoaded:function(n){return n.complete?typeof n.naturalWidth!="undefined"&&n.naturalWidth==0?!1:!0:!1},OnUploadBegin:function(n){DFU.maxProgresReached=!1;DFU.toogleLoading(n,!0)},OnUploadCompleted:function(n){DFU.toogleLoading(n,!1)},maxProgresReached:!1,OnUploadProgressChanged:function(n,t,i){t===0&&(t=1);var u=$cmsj("#"+n),f=u.find("*[id$=Progress]"),r=u.find(".UploadCancel"),e=parseInt(i/t*100,10);u.width()>50?(r.length===0&&(r=$cmsj("<span><\/span>"),r.html('<i class="icon-bin cms-icon-80" aria-hidden="true"><\/i>'),r.addClass("UploadCancel"),f.after(r),r.click(function(){cmsrequire(["CMS/EventHub"],function(t){t.publish("UploadCanceled",n)})})),(e>100||DFU.maxProgresReached)&&(DFU.maxProgresReached=!0,e=100),f.html(e+"%")):r.length===0&&(r=$cmsj("<span><\/span>"),r.html("&nbsp;"),r.addClass("UploadCancel"),r.css({display:"block",background:"#fff",position:"absolute",top:0,left:0,width:u.width(),height:u.height()}),r.hide(),f.after(r),r.fadeTo(100,.01),r.click(function(){cmsrequire(["CMS/EventHub"],function(t){t.publish("UploadCanceled",n)})}))}}