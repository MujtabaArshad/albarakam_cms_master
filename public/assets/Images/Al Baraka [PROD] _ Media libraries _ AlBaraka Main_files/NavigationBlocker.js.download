cmsdefine(["CMS/EventHub"],function(n){var i=window.CheckChanges,t=function(){this.isBlocked=!1;this.message=undefined;this._bindToWindowUnload();n.subscribe("NavigationBlocker.Block",this._block.bind(this));n.subscribe("NavigationBlocker.Unblock",this._unblock.bind(this))};return t.prototype.canNavigate=function(){var n=!0;return i&&(n=i()),this.isBlocked&&(n=confirm(this.message),n&&this.unblock()),n},t.prototype.block=function(t){n.publish({name:"NavigationBlocker.Block",onlySubscribed:!0},t)},t.prototype.unblock=function(){n.publish({name:"NavigationBlocker.Unblock",onlySubscribed:!0})},t.prototype._block=function(n){window.disableTabCallback=!0;this.message=n;this.isBlocked=!0},t.prototype._unblock=function(){this.isBlocked=!1;this.message=undefined;window.disableTabCallback=!1},t.prototype._bindToWindowUnload=function(){var n=this;window.onbeforeunload=function(){if(n.isBlocked)return n.message}},t})