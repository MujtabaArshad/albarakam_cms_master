cmsdefine(["CMS/WebFormCaller","jQuery"],function(n,t){return function(i){var r=i,y=t("#"+r.gridId+" input[name$='headerBox']"),u=t("#"+r.gridId+" :checkbox[data-arg]"),f=t("#"+r.hdnSelId),p=t("#"+r.hdnSelHashId),w=t("#"+r.hdnCmdNameId),o=t("#"+r.hdnCmdArgId),b=function(n){return document.location.replace(n),!1},e=function(t){n.doPostback({targetControlUniqueId:r.uniqueId,args:t})},k=function(){e("ShowFilter")},d=function(){e("Reset")},g=function(){e("Reload")},s=function(n,t){return w.val(n),o.val(t),e("UniGridAction"),!1},nt=function(n){s("#destroyobject",n)},h=function(n){p.val(n)},c=function(){var n=u.filter(":checked").length===u.length;y.prop("checked",n)},l=function(i,u){var s=t(i),e=f.val(),o=s.data("arg"),c=s.data("arghash");e||(e="|");i.checked?e+=o+"|":e=e.replace("|"+o+"|","|");f.val(e);u||n.doCallback({targetControlUniqueId:r.uniqueId,args:e+":"+o+"#"+c,successCallback:h})},a=function(i,e){var o=":",s=typeof i=="boolean"?i:i.checked;e||(e=u);e.each(function(n,i){i.checked!==s&&i.disabled!==!0&&(i.checked=s,l(i,!0),o+=t(i).data("arg")+"#"+t(i).data("arghash")+":")});n.doCallback({targetControlUniqueId:r.uniqueId,args:f.val()+o,successCallback:h})},v=function(){u.each(function(n,t){t.checked=!1});f.val("");h("")},tt=function(){var n=f.val();return!n||n==="|"},it=function(n){o.val(n)},rt=function(){function i(n,i){return i.children().each(function(){t(this).width(t(this).width())}),i}function u(n,i){var u=t(n).data()["ui-sortable"],r=i.helper.height();u.containment[3]+=r*2-i.placeholder.height();i.placeholder.height(r)}var n=t("#"+r.id+" tbody");n.sortable({axis:"y",cancel:"",containment:"parent",cursor:"move",handle:"button.js-_move",helper:i,tolerance:"pointer",items:"> *:not(.unsortable)",start:function(n,i){t(this).data("previndex",i.item.index());u(this,i)},update:function(n,i){var r=t(this).data("previndex"),u=i.item.index();s("#move",o.val()+":"+r+":"+u)}}).disableSelection()},ut=function(){var e=t("#"+r.gridId+" td.unigrid-selection"),f,o,s,n,i,h,l;e.on("selectstart",!1);e.find("label").click(function(n){n.shiftKey&&n.preventDefault()});e.click(function(r){n=t(this).find(":checkbox");r.shiftKey&&(f||(f=n),o=u.index(n),s=u.index(f),i=u.slice(Math.min(o,s),Math.max(o,s)+1),h=i.slice(1,i.length-1),l=i.length-2===h.filter(":checked").length&&n.prop("checked"),a(!l,i),c(),n.focus());f=n})};return r.resetSelection&&v(),r.allowSorting&&rt(),c(),r.allowShiftKeySelection&&ut(),window.CMS=window.CMS||{},window.CMS["UG_"+r.id]={clearSelection:v,checkSelection:tt,reload:g,command:s,destroy:nt,selectAll:a,select:l,updateHeaderCheckbox:c,redir:b,reset:d,showFilter:k,initMove:it}}})